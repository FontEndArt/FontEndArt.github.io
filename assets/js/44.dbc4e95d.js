(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{253:function(e,t,v){"use strict";v.r(t);var r=v(0),o=Object(r.a)({},(function(){var e=this,t=e.$createElement,v=e._self._c||t;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"vue主线剧情之vm-mount"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#vue主线剧情之vm-mount"}},[e._v("#")]),e._v(" Vue主线剧情之vm.$mount")]),e._v(" "),v("h2",{attrs:{id:"前言"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),v("p",[e._v("上篇忽略了"),v("code",[e._v("src/platforms/web")]),e._v("的说明，这里补上。")]),e._v(" "),v("p",[e._v("实际上Vue在打包的时候，入口优先走的"),v("code",[e._v("src/platforms/web")]),e._v("目录，有两种入口：")]),e._v(" "),v("ul",[v("li",[e._v("compiler模式")]),e._v(" "),v("li",[e._v("runtime模式")])]),e._v(" "),v("p",[e._v("runtime模式就是使用webpack构建的，执行的时候有render方法，template用vue-loader去解析的。")]),e._v(" "),v("p",[e._v("compiler模式可以说成是用cdn的方式（举例而已），template模版需要vue执行之后再编译。")]),e._v(" "),v("h2",{attrs:{id:"runtime模式的-mount"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#runtime模式的-mount"}},[e._v("#")]),e._v(" runtime模式的$mount")]),e._v(" "),v("p",[e._v("我们首先看一下runtime的: "),v("a",{attrs:{href:"https://github.com/vuejs/vue/blob/6fe07ebf5ab3fea1860c59fe7cdd2ec1b760f9b0/src/platforms/web/runtime/index.js#L36-L43",target:"_blank",rel:"noopener noreferrer"}},[e._v("$mount实现"),v("OutboundLink")],1)]),e._v(" "),v("p",[e._v("我们可以看到主要接收两个参数 el、hydrating，el如果是浏览器就设置为选中项（可能是node），另一个还不知道什么意思。先略过，看后面的"),v("code",[e._v("mountComponent")]),e._v("方法.")]),e._v(" "),v("p",[v("code",[e._v("mountComponent")]),e._v("方法来自： "),v("a",{attrs:{href:"https://github.com/vuejs/vue/blob/dev/src/core/instance/lifecycle.js#L141-L213",target:"_blank",rel:"noopener noreferrer"}},[e._v("core/instance/lifecycle"),v("OutboundLink")],1)]),e._v(" "),v("p",[v("strong",[e._v("嘿，boys～")])]),e._v(" "),v("p",[e._v("到这里又看到了我们熟悉的"),v("code",[e._v("callhook(vm, xxx)")]),e._v("， 还有我们在写组件的时候经常遇到的 "),v("code",[e._v("Watcher")]),e._v(" 。")]),e._v(" "),v("p",[e._v("那我们根据这里就可以得到以下流程：")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6ly1g95ewrzu8dj30pc13ogm7.jpg",alt:""}})]),e._v(" "),v("h2",{attrs:{id:"总结"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),v("p",[e._v("通过我们对这个"),v("code",[e._v("public mount methed")]),e._v("的理解，基本上已经清楚，这块主要负责的是生命周期中 "),v("code",[e._v("beforeMount -> mounted")]),e._v(" 的过程，也就是组件的渲染。")]),e._v(" "),v("p",[v("img",{attrs:{src:"https://tva1.sinaimg.cn/large/006y8mN6ly1g95f1jlp90j31080ra3zj.jpg",alt:""}})]),e._v(" "),v("p",[e._v("不过，我们好像并没有看到触发 "),v("code",[e._v("updated")]),e._v(" 的钩子。猜测是在哪里呢，update相关的么，估计是在"),v("code",[e._v("vm._update")]),e._v("里咯。下面就让我们去找一下它了解一下。")]),e._v(" "),v("blockquote",[v("p",[e._v("这里其实还有几个地方并不知道是什么作用，留作后面探究。比如 "),v("code",[e._v("vm._render")]),e._v("、"),v("code",[e._v("noop")]),e._v("、"),v("code",[e._v("hydrating")]),e._v(" 这几个。")])])])}),[],!1,null,null,null);t.default=o.exports}}]);